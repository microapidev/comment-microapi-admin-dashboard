(this["webpackJsonptest-admin"]=this["webpackJsonptest-admin"]||[]).push([[0],{352:function(e,a,t){e.exports=t(495)},495:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(16),o=t.n(c),i=t(592),l=t(591),s=t(566),u=t(567),m=t(594),d=t(568),p=t(52),g=t(75),E=t(156),f=t.n(E),b=t(14),h=t(68),v=t(89),O=Object(v.a)({root:{textDecoration:"none"}}),y=function(e){var a=O(),t=function(){var e=Object(n.useState)(0),a=Object(p.a)(e,2),t=a[0],r=a[1],c=Object(h.a)();return Object(n.useEffect)((function(){c.getList("Admins").then((function(e){var a=e.total;return r(a)}))}),[t,c]),[t]}(),c=Object(p.a)(t,1)[0];return r.a.createElement(s.a,{variant:"outlined"},r.a.createElement(b.a,{to:"/Admins",className:a.root},r.a.createElement(m.a,{display:"flex",justifyContent:"space-between",p:2},r.a.createElement(f.a,{color:"action"}),r.a.createElement(m.a,{textAlign:"right"},r.a.createElement(g.a,{color:"textPrimary"},"Admins"),r.a.createElement(m.a,{mx:2}),r.a.createElement(g.a,{color:"textSecondary",variant:"h4"},c)))))},j=t(158),w=t.n(j),P=Object(v.a)({root:{textDecoration:"none"}}),D=function(e){var a=P(),t=function(){var e=Object(n.useState)(0),a=Object(p.a)(e,2),t=a[0],r=a[1],c=Object(h.a)();return Object(n.useEffect)((function(){c.getList("Applications").then((function(e){var a=e.total;return r(a)}))}),[t,c]),[t]}(),c=Object(p.a)(t,1)[0];return r.a.createElement(s.a,{variant:"outlined"},r.a.createElement(b.a,{to:"/Applications",className:a.root},r.a.createElement(m.a,{display:"flex",justifyContent:"space-between",p:2},r.a.createElement(w.a,{color:"action"}),r.a.createElement(m.a,{textAlign:"right"},r.a.createElement(g.a,{color:"textPrimary"},"Applications"),r.a.createElement(m.a,{mx:2}),r.a.createElement(g.a,{color:"textSecondary",variant:"h4"},c)))))},x=t(159),I=t.n(x),A=Object(v.a)({root:{textDecoration:"none"}}),k=function(e){var a=A(),t=function(){var e=Object(n.useState)(0),a=Object(p.a)(e,2),t=a[0],r=a[1],c=Object(h.a)();return Object(n.useEffect)((function(){c.getList("Organizations").then((function(e){var a=e.total;return r(a)}))}),[t,c]),[t]}(),c=Object(p.a)(t,1)[0];return r.a.createElement(s.a,{variant:"outlined"},r.a.createElement(b.a,{to:"/Organizations",className:a.root},r.a.createElement(m.a,{display:"flex",justifyContent:"space-between",p:2},r.a.createElement(I.a,{color:"action"}),r.a.createElement(m.a,{textAlign:"right"},r.a.createElement(g.a,{color:"textPrimary"},"Organizations"),r.a.createElement(m.a,{mx:2}),r.a.createElement(g.a,{color:"textSecondary",variant:"h4"},c)))))},N=function(){return r.a.createElement(s.a,null,r.a.createElement(u.a,{title:"Welcome to Admin Dashboard"}),r.a.createElement(m.a,{p:2},r.a.createElement(d.a,{container:!0,spacing:2},r.a.createElement(d.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(y,null)),r.a.createElement(d.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(D,null)),r.a.createElement(d.a,{item:!0,xs:12,sm:6,md:4},r.a.createElement(k,null)))))},T=t(207),S=t.n(T),z=t(273),q={login:function(){var e=Object(z.a)(S.a.mark((function e(a){var t,n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.username,n=a.password,r=new Request("https://comments-microservice.herokuapp.com/v1/msadmins/login",{method:"POST",body:JSON.stringify({email:t,password:n}),headers:{"Content-Type":"application/json"}}),e.abrupt("return",fetch(r).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){var a=e.data;localStorage.setItem("systemToken",a.systemToken)})));case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),logout:function(){return localStorage.removeItem("systemToken"),Promise.resolve()},checkError:function(e){return!e||401!==e.status&&403!==e.status?Promise.resolve():(localStorage.removeItem("systemToken"),Promise.reject())},checkAuth:function(){return localStorage.getItem("systemToken")?Promise.resolve():Promise.reject()},getPermissions:function(){return Promise.resolve()}},M=t(79),C=t(73),L=function(e){return e.records&&Array.isArray(e.records)?e.records.map((function(e){return Object(C.a)({id:e.msAdminId},e)})):e.msAdminId?Object(C.a)({id:e.msAdminId},e):e},R=t(24),J="https://comments-microservice.herokuapp.com/v1",F=function(e){return Object(C.a)({id:e.organizationId},e)},U=function(e,a,t){var n=e;return Array.isArray(e.records)&&e.records[0].organizationId&&(n=e.records.map(F)),a&&t&&(n=n.filter((function(e){return e[a]===t}))),n},W=function(e){return e.organizationId?Object(C.a)({id:e.applicationId,orgId:e.organizationId._id},e):Object(C.a)({id:e.applicationId},e)},B=function(e,a,t){var n=e;return Array.isArray(e.records)&&e.records[0].applicationId&&(n=e.records.map(W),a&&t&&(n=n.filter((function(e){return e[a]._id===t})))),n},H="https://comments-microservice.herokuapp.com/v1",_=function(e){return Object(C.a)({id:e.planId},e)},Q=function(e,a,t){var n=e;return Array.isArray(e)&&e[0].planId?n=e.map(_):e.planId&&(n=_(e)),a&&t&&(n=n.filter((function(e){return e[a]===t}))),n},Y="https://comments-microservice.herokuapp.com/v1",$=function(e,a,t){switch(a){case"Admins":return function(e,a){switch(e){case R.d:return{url:"".concat(J,"/msadmins"),getData:L};case R.g:return{url:"".concat(J,"/msadmins/").concat(a.id),getData:L};case R.e:case R.f:return{url:"".concat(J,"/msadmins"),getData:L};case R.h:return{url:"".concat(J,"/msadmins"),options:{method:"PATCH",body:JSON.stringify(a.data)},getData:L};case R.a:return{url:"".concat(J,"/msadmins/create"),options:{method:"POST",body:JSON.stringify(a.data)},getData:L};case R.b:return{url:"".concat(J,"/msadmins/").concat(a.id),options:{method:"DELETE"},getData:L};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,t);case"Settings":return function(e,a){switch(e){case R.g:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),getData:function(e){return e}};case R.h:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/settings"),options:{method:"PATCH",body:JSON.stringify(a.data)},getData:function(e){return e}};default:throw new Error("Unsupported Admin Data Provider request type ".concat(e))}}(e,t);case"Organizations":return function(e,a){switch(e){case R.e:case R.d:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations"),getData:U};case R.f:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations"),getData:function(e){return U(e,a.target,a.id)}};case R.g:case R.b:return{url:"".concat("https://comments-microservice.herokuapp.com/v1","/msadmins/organizations/").concat(a.id),getData:U};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,t);case"Applications":return function(e,a){switch(e){case R.e:case R.d:return{url:"".concat(H,"/msadmins/applications"),getData:B};case R.f:return{url:"".concat(H,"/msadmins/applications"),getData:function(e){return B(e,a.target,a.id)}};case R.g:case R.b:return{url:"".concat(H,"/msadmins/applications/").concat(a.id),getData:B};case R.c:return{urls:a.ids.map((function(e){return"".concat(H,"/msadmins/applications/").concat(e)})),getData:B};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,t);case"Plans":return function(e,a){switch(e){case R.e:case R.d:return{url:"".concat(Y,"/msadmins/plans"),getData:Q};case R.f:return{url:"".concat(Y,"/msadmins/plans"),getData:function(e){return Q(e,a.target,a.id)}};case R.a:return{url:"".concat(Y,"/msadmins/plans"),options:{body:JSON.stringify(a.data)},getData:Q};case R.g:case R.b:return{url:"".concat(Y,"/msadmins/plans/").concat(a.id),getData:Q};case R.c:return{urls:a.ids.map((function(e){return"".concat(Y,"/msadmins/plans/").concat(e)})),getData:Q};default:throw new Error("Unsupported Application Data Provider request type ".concat(e))}}(e,t);default:return""}},G=t(274),K=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.headers||(a.headers=new Headers({Accept:"application/json"}));var t=localStorage.getItem("systemToken");return a.headers.set("Authorization","Bearer ".concat(t)),M.a.fetchJson(e,a)},V={authProvider:q,dataProvider:{getList:function(e,a){var t=function(e){var a=e&&e.pagination?e.pagination:{page:1,perPage:10},t=a.page;return{limit:a.perPage,sort:(e&&e.sort?e.sort:{order:"DESC"}).order,page:t}}(a),n=$(R.d,e,a);return K("".concat(n.url,"?").concat(Object(G.stringify)(t))).then((function(e){var a=e.json;return{data:n.getData(a.data),total:a.data.pageInfo?a.data.pageInfo.totalRecord:a.data.length}}))},getOne:function(e,a){var t=$(R.g,e,a);return K(t.url).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},getMany:function(e,a){var t=$(R.e,e,a);return K(t.url).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},getManyReference:function(e,a){var t=$(R.f,e,a);return K(t.url).then((function(e){var a=e.json;return{data:t.getData(a.data,t.target,t.targetId),total:a.data.pageInfo?a.data.pageInfo.totalRecord:a.data.length}}))},update:function(e,a){var t=localStorage.getItem("systemToken"),n=$(R.h,e,a);return t===a.id||t===a.msAdminId?K(n.url,n.options).then((function(e){var a=e.json;return{data:n.getData(a.data)}})):Promise.reject()},updateMany:function(e,a){return Promise.reject()},create:function(e,a){var t=$(R.a,e,a);return K(t.url,{method:"POST",body:JSON.stringify(a.data)}).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},delete:function(e,a){var t=$(R.b,e,a);return K(t.url,{method:"DELETE"}).then((function(e){var a=e.json;return{data:t.getData(a.data)}}))},deleteMany:function(e,a){var t=$(R.c,e,a),n=[];return Promise.all(t.urls.map((function(e){return K(e,{method:"DELETE"}).then((function(e){var a=e.json;return n.push(t.getData(a.data))}))}))).then((function(){return{data:n}}))}}},X=t(499),Z=t(83),ee=t(607),ae=t(608),te=t(595),ne=t(600),re=t(593),ce=t(581),oe=t(610),ie=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{basePath:a}),r.a.createElement(ae.a,{basePath:a,record:t,resource:n}))},le=function(e){var a=Object(X.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(te.a,Object.assign({label:"Admins",title:"Admins",actions:r.a.createElement(ie,null)},e),a?r.a.createElement(ne.a,{linkType:"show",primaryText:function(e){return e.fullname},secondaryText:function(e){return e.email},tertiaryText:function(e){return e.role}}):r.a.createElement(re.a,{rowClick:"show",isRowSelectable:function(e){return!1}},r.a.createElement(ce.a,{label:"Name",source:"fullname"}),r.a.createElement(ce.a,{label:"ID",source:"id"}),r.a.createElement(oe.a,{source:"email"}),r.a.createElement(ce.a,{source:"role"})))},se=t(319),ue=t(582),me=t(602),de=t(597),pe=t(290),ge=function(e){return r.a.createElement(se.a,e,r.a.createElement(ue.a,null))},Ee=function(e){return r.a.createElement(me.a,e,r.a.createElement(de.a,{toolbar:r.a.createElement(ge,null)},r.a.createElement(pe.a,{disabled:!0,source:"id"}),r.a.createElement(pe.a,{label:"Full Name",source:"fullname"}),r.a.createElement(pe.a,{disabled:!0,source:"email"}),r.a.createElement(pe.a,{disabled:!0,source:"role"})))},fe=t(611),be=t(291),he=t(586),ve=function(e){return r.a.createElement(fe.a,Object.assign({label:"Create",title:"Create an Admin"},e),r.a.createElement(de.a,{redirect:"show"},r.a.createElement(pe.a,{label:"Full Name",source:"fullname",validate:[Object(be.b)()]}),r.a.createElement(pe.a,{source:"email",validate:[Object(be.b)()]}),r.a.createElement(he.a,{source:"password",validate:[Object(be.b)()]})))},Oe=t(587),ye=t(601),je=t(606),we=t(588),Pe=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Z.a,null,r.a.createElement(Oe.a,{basePath:a,record:t}),r.a.createElement(ye.a,{basePath:a,record:t,resource:n}))},De={list:le,edit:Ee,create:ve,show:function(e){return r.a.createElement(je.a,Object.assign({label:"Show",title:"",actions:r.a.createElement(Pe,null)},e),r.a.createElement(we.a,null,r.a.createElement(ce.a,{label:"Full Name",source:"fullname"}),r.a.createElement(ce.a,{source:"email"}),r.a.createElement(ce.a,{source:"password"}),r.a.createElement(ce.a,{source:"role"})))},icon:f.a},xe=t(315),Ie=function(e){return r.a.createElement(xe.a,Object.assign({rowsPerPageOptions:[10,25,50]},e))},Ae=function(e){var a=Object(X.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(te.a,Object.assign({label:"Organizations",title:"Organizations",pagination:r.a.createElement(Ie,null)},e),a?r.a.createElement(ne.a,{linkType:"show",primaryText:function(e){return e.organizationName},secondaryText:function(e){return"".concat(e.organizationId)}}):r.a.createElement(re.a,{rowClick:"show"},r.a.createElement(ce.a,{label:"Name",source:"organizationName"}),r.a.createElement(ce.a,{label:"ID",source:"id"})))},ke=t(596),Ne=t(612),Te=t(603),Se=Object(v.a)({root:{color:"#3f51b5"}}),ze=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Z.a,null,r.a.createElement(ye.a,{basePath:a,record:t,resource:n}))},qe={list:Ae,show:function(e){var a=Se();return r.a.createElement(je.a,Object.assign({label:"Show",actions:r.a.createElement(ze,null)},e),r.a.createElement(ke.a,null,r.a.createElement(Ne.a,{label:"details"},r.a.createElement(ce.a,{label:"Organization Name",source:"organizationName"}),r.a.createElement(ce.a,{label:"ID",source:"organizationId"})),r.a.createElement(Ne.a,{label:"applications"},r.a.createElement(Te.a,{link:"show",label:"",reference:"Applications",target:"organizationId"},r.a.createElement(ne.a,{className:a.root,linkType:"show",primaryText:function(e){return e.applicationName}})))))},icon:I.a},Me=t(598),Ce=function(e){return r.a.createElement(xe.a,Object.assign({rowsPerPageOptions:[10,25,50]},e))},Le=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Z.a,null,r.a.createElement(ye.a,{basePath:a,record:t,resource:n}))},Re={list:function(e){var a=Object(X.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(te.a,Object.assign({label:"Applications",title:"Applications",pagination:r.a.createElement(Ce,null)},e),a?r.a.createElement(ne.a,{linkType:"show",primaryText:function(e){return e.applicationName},secondaryText:function(e){return e.orgId},tertiaryText:function(e){return e.organizationName}}):r.a.createElement(re.a,{rowClick:"show"},r.a.createElement(ce.a,{label:"Name",source:"applicationName"}),r.a.createElement(ce.a,{label:"ID",source:"id"}),r.a.createElement(Me.a,{link:"show",label:"Organization",source:"orgId",reference:"Organizations"},r.a.createElement(ce.a,{label:"Organization Name",source:"organizationName"}))))},show:function(e){return r.a.createElement(je.a,Object.assign({label:"Show",title:"",actions:r.a.createElement(Le,null)},e),r.a.createElement(we.a,null,r.a.createElement(ce.a,{source:"id"}),r.a.createElement(ce.a,{label:"Name",source:"applicationName"}),r.a.createElement(ce.a,{label:"Organization ID",source:"orgId"}),r.a.createElement(Me.a,{link:"show",label:"Organization",source:"orgId",reference:"Organizations"},r.a.createElement(ce.a,{source:"organizationName"}))))},icon:w.a},Je=t(604),Fe=t(589),Ue=t(613),We=function(e){return r.a.createElement(fe.a,Object.assign({label:"Create",title:"Create a Plan"},e),r.a.createElement(de.a,{redirect:"show"},r.a.createElement(pe.a,{label:"Name",source:"name",validate:[Object(be.b)()]}),r.a.createElement(Je.a,{label:"Logging",source:"logging"}),r.a.createElement(Fe.a,{label:"Maximum Log Retention Period (Days)",source:"maxLogRetentionPeriod"}),r.a.createElement(Ue.a,{source:"periodWeight",validate:[Object(be.b)()],choices:[{id:1,name:"Monthly"},{id:3,name:"Quarterly"},{id:12,name:"Yearly"}]}),r.a.createElement(Fe.a,{label:"Maximum requests per day",source:"maxRequestPerDay"}),r.a.createElement(Fe.a,{label:"Maximum requests per minute",source:"maxRequestPerMin"})))},Be=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Z.a,null,r.a.createElement(ee.a,{basePath:a}),r.a.createElement(ae.a,{basePath:a,record:t,resource:n}))},He=function(e){var a=Object(X.a)((function(e){return e.breakpoints.down("sm")}));return r.a.createElement(te.a,Object.assign({label:"Plans",title:"Plans",actions:r.a.createElement(Be,null),pagination:null},e),a?r.a.createElement(ne.a,{linkType:"show",primaryText:function(e){return e.planName}}):r.a.createElement(re.a,{rowClick:"show"},r.a.createElement(ce.a,{label:"Name",source:"planName"}),r.a.createElement(ce.a,{label:"ID",source:"id"})))},_e=t(590),Qe=function(e){var a=e.basePath,t=e.data,n=e.resource;return r.a.createElement(Z.a,null,r.a.createElement(ye.a,{basePath:a,record:t,resource:n}))},Ye=function(e){return r.a.createElement(je.a,Object.assign({label:"Show",title:"",actions:r.a.createElement(Qe,null)},e),r.a.createElement(ke.a,null,r.a.createElement(Ne.a,{label:"details"},r.a.createElement(ce.a,{label:"Name",source:"planName"}),r.a.createElement(ce.a,{label:"ID",source:"id"})),r.a.createElement(Ne.a,{label:"logging"},r.a.createElement(_e.a,{source:"logging",valueLabelTrue:"Logging has been enabled.",valueLabelFalse:"Logging is not enabled."}),r.a.createElement(ce.a,{label:"Maximum log retention period",source:"maxLogRetentionPeriod"}),r.a.createElement(ce.a,{label:"Period weight",source:"periodWeight"})),r.a.createElement(Ne.a,{label:"requests"},r.a.createElement(ce.a,{label:"Maximum requests per day",source:"maxRequestPerDay"}),r.a.createElement(ce.a,{label:"Maximum requests per minute",source:"maxRequestPerMin"}))))},$e=t(299),Ge={create:We,list:He,show:Ye,icon:t.n($e).a},Ke=function(e){return r.a.createElement(je.a,Object.assign({label:"Settings",title:"Settings"},e),r.a.createElement(we.a,null,r.a.createElement(ce.a,{label:"Requests per Minute (max)",source:"maxRequestsPerMin"}),r.a.createElement(ce.a,{label:"Items per Page (default)",source:"maxItemsPerPage"}),r.a.createElement(ce.a,{label:"Items per Page (max)",source:"defaultItemsPerPage"})))},Ve=t(300),Xe={list:Ke,show:Ke,icon:t.n(Ve).a},Ze=t(314),ea=Object(Ze.a)({palette:{secondary:{main:"#2339FF"}}});var aa=function(){return r.a.createElement(i.a,Object.assign({theme:ea,dashboard:N},V),r.a.createElement(l.a,Object.assign({name:"Admins"},De)),r.a.createElement(l.a,Object.assign({name:"Organizations"},qe)),r.a.createElement(l.a,Object.assign({name:"Applications"},Re)),r.a.createElement(l.a,Object.assign({name:"Plans"},Ge)),r.a.createElement(l.a,Object.assign({name:"Settings"},Xe)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(aa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[352,1,2]]]);
//# sourceMappingURL=main.ed3e51d5.chunk.js.map